[TOC]


# BOS物流项目58———quartz3\_cron表达式的格式

## 一、核心概念

1、scheduler是一个计划调度器容器，容器里面可以盛放众多的JobDetail和trigger，当容器启动后，里面的每个JobDetail都会根据trigger按部就班自动去执行。 
2、JobDetail是一个可执行的工作，它本身可能是有状态的。 
3、Trigger触发器代表一个调度参数的配置，什么时候去调。 4、当JobDetail和Trigger在scheduler容器上注册后，形成了装配好的作业（JobDetail和Trigger所组成的一对儿），就可以伴随容器启动而调度执行了。 5、scheduler是个容器，容器中有一个线程池，用来并行调度执行每个作业，这样可以提高容器效率。



---

## 二、cron 表达式的格式

### 2.1 Quartz Cron 表达式支持到七个域

|名称|是否必须|允许值|特殊字符|
|----|----|---|---|
|秒|是|0-59|, - \* /|
|分|是|0-59|, - \* /|
|时|是|0-23|, - * / |
|日|是|1-31|, - * ? / L W C |
|月|是|1-12 或 JAN-DEC|, - \* /|
|周|是|1-7 或 SUN-SAT|, - \* ? / L C # |
|年|否|空 或 1970-2099|, - \* / |

月份和星期的名称是不区分大小写的。FRI 和 fri 是一样的。 域之间有空格分隔，这和 UNIX cron 一样。无可争辩的，我们能写的最简单的表达式看起来就是这个了： ```* * * ? * * 
```这个表达会每秒钟(每分种的、每小时的、每天的)激发一个部署的 job。


### 2.2 * 星号 

使用星号(*) 指示着你想在这个域上包含所有合法的值。

例如

```
0 * 17 * * ? 
```

意义：每天从下午5点到下午5:59中的每分钟激发一次 trigger。它停在下午 5:59 是因为值 17 在小时域上，在下午 6 点时，小时变为 18 了，也就不再理会这个 trigger，直到下一天的下午5点。


### 2.3 ? 问号 

? 号只能用在日和周域上，但是不能在这两个域上同时使用。你可以认为 ? 字符是 "我并不关心在该域上是什么值。" 这不同于星号，星号是指示着该域上的每一个值。? 是说不为该域指定值。

```
0 10,44 14 ? 3 WEB 
```意义：在三月中的每个星期三的下午 2:10 和 下午 2:44 被触发。


### 2.4 , 逗号

逗号 (,) 是用来在给某个域上指定一个值列表的。例如，使用值 0,15,30,45 在秒域上意味着每15秒触发一个 trigger。 表达式样例： ```0 0,15,30,45 * * * ? 
```意义：每刻钟触发一次 trigger。


### 2.5 / 斜杠

斜杠 (/) 是用于时间表的递增的。

```
0/15 0/30 * * * ? 
```意义：在整点和半点时每15秒触发 trigger。

### 2.6 \- 中划线 

中划线 (-) 用于指定一个范围。例如，在小时域上的 3-8 意味着 "3,4,5,6,7 和 8 点。"  域的值不允许回卷，所以像 50-10 这样的值是不允许的。 表达式样例： ```0 45 3-8 ? * * 
```意义：在上午的3点至上午的8点的45分时触发 trigger。 


### 2.7 L 字母

L 说明了某域上允许的最后一个值。它仅被日和周域支持。当用在日域上，表示的是在月域上指定的月份的最后一天。


### 2.8 W 字母

W 字符代表着平日 (Mon-Fri)，并且仅能用于日域中。它用来指定离指定日的最近的一个平日。


### 2.9 # 井号 

\# 字符仅能用于周域中。它用于指定月份中的第几周的哪一天。例如，如果你指定周域的值为 6#3，它意思是某月的第三个周五 (6=星期五，#3意味着月份中的第三周)。另一个例子 2#1 意思是某月的第一个星期一 (2=星期一，#1意味着月份中的第一周)。注意，假如你指定 #5，然而月份中没有第 5 周，那么该月不会触发。示例：表达式意义
"0 0 12 * *?" 每天中午12点触发



---

## 三、源码下载

[https://github.com/wimingxxx/bos-parent](https://github.com/wimingxxx/bos-parent/)